<!doctype html>
<html lang="en">
    {% include "partials/header.html" %}

    {% load static %}

    <title>{% include "partials/Company_name.html" %}</title>
</head>
<body class="">
{% include "partials/navbar.html" %}
<div class="container-fluid">
    <div class="row d-flex flex-wrap">
        <div class="col-lg">
            <h2 class="flex-wrap py-2">Schedule Service:</h2>
            <div class="row">
                <div class="col p-0">
                    <!-- Calendly inline widget begin -->
                    <div class="calendly-inline-widget w-100" 
                    data-url="https://calendly.com/royalcarpetclean/120?hide_landing_page_details=1?hide_event_type_details=1&name={{ customer.first_name }}%20{{ customer.last_name }}&email={{ customer.email }}&location={{ customer.addresses.all.0.address }},%20{{ customer.addresses.all.0.city }}%20{{ customer.addresses.all.0.state }},%20{{ customer.addresses.all.0.zipcode }}" style="height:900px"></div>
                        <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
                        <script>
                            Calendly.initInlineWidget({
                                url: 'https://calendly.com/Y/royalcarpetclean/120',
                                parentElement: document.getElementById('SAMPLEdivID'),
                                prefill: {
                                    name: '{{ customer.first_name }} {{ customer.last_name }}',
                                    email: '{{ customer.email }}',
                                    location: '{{ customer.addresses.all.0.address }}, {{ customer.addresses.all.0.city }}%20{{ customer.addresses.all.0.state }}, {{ customer.addresses.all.0.zipcode }}',
                                },
                                utm: {},
                                event: "calendly.date_and_time_selected",
                                payload: {}
                            });
                        </script>
                    <!-- Calendly inline widget end -->
                </div>
            </div> 
        </div>

        <div class="col-lg-auto" id="quoteTable">
            {% include "partials/quoteTable.html" %}
            <script>
                $(document).ready(function()
            {
                function isCalendlyEvent(e) {
                return e.data.event &&
                        e.data.event.indexOf('calendly') === 0;
                };
                
                window.addEventListener(
                'message',
                function(e) {
                    if (isCalendlyEvent(e)) {
                    console.log(e.data);
                    }
                }
                );
                    $('#optionsTableHeader').replaceWith("<h2 class='py-2'>Your Selected Services:</h2>");
                    $('#quoteButtons').remove();
            }
            </script>
        </div>


    </div>
</div>
<!-- <div class="col-5">
    <label for="start_date" class="col-form-label">Start Date:</label>
</div>
<div class="col-7">
    <input name="start_date" type="date" id="start_date"  class="form-control"> 
</div> -->
        








    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
    -->
</body>
</html>